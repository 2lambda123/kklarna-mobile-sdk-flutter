<!DOCTYPE html>
<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-type"/>
    <script src="https://x.klarnacdn.net/postpurchaseexperience/lib/v1/api.js"></script>
    <script>
    let ppe = null;

    function log(msg) {
        console.log("PPE: "+ msg);
    }

    function initialize(locale, purchaseCountry, design) {
        log('initialize');
        const instance = new Klarna.PostPurchaseExperience.init({
            locale: locale,
            purchase_country: purchaseCountry,
            design: design
        });
        ppe = instance;
        PPECallback.onInitialized(JSON.stringify(ppe));
    }

    function renderOperation(locale, operationToken) {
        log('renderOperation');
        ppe.renderOperation({
            locale: locale,
            operation_token: operationToken
        }, function (error, data) {
            log('result error is -> '+ JSON.stringify(error));
            log('result data is -> '+ JSON.stringify(data));
            PPECallback.onRenderOperation(JSON.stringify(data), JSON.stringify(error));
        });
    }


    function authorizationRequest(locale, clientId, scope, redirectUri, state, loginHint, responseType) {
        log('authorizationRequest');
        ppe.authorizationRequest({
            locale: locale,
            client_id: clientId,
            scope: scope,
            redirect_uri: redirectUri,
            state: state,
            login_hint: loginHint,
            response_type: responseType
        });
        PPECallback.onAuthorizationRequest();
    }

    log("PPE HTML loaded.");



    </script>
</head>
<body></body>
</html>